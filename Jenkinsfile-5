pipeline {
  agent none
  stages {
    stage('Run Robot Tests') {
      agent { dockerfile true }
      steps {
        sh '''
          mkdir -p results
          docker run --rm -v $PWD/results:/opt/robotframework/results my-docker-image:latest \
            robot --outputdir /opt/robotframework/results tests/suites/smoke/order_from_webshop.robot
        '''
      }
    }
  }
}

